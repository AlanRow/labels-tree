# Тестовое задание: иерархическая таблица на Vue Ag Grid

Реализация тестового задания с оптимизацией TreeStore

### Установка зависимостей

```sh
npm install
```

### Настройка ключа Vue Ag Grid

Для доступа к функциям модуля `ag-grid-enterprise` вам потребуется лицензионный ключ, который можно получить на [сайте](https://www.ag-grid.com/vue-data-grid/license-install/
) (есть пробная версия). Этот ключ необходимо прописать в файле .env в параметре `VITE_AG_GRID_LICENSE_KEY` или прописать в переменные окружения иным способом

```.env
VITE_AG_GRID_LICENSE_KEY="[Ваш лицензионный ключ]"
```

### Запуск песочницы

```sh
npm run dev
```

### Сборка

```sh
npm run build
```

### Юнит-тесты

```sh
npm run test:unit
```

### Покрытие тестами

```sh
npm run test:coverage
```

### Экспорт TreeStore при помощи npm link

Для локально добавления зависимости в другой проект, он должен использовать TypeScript. Можно сделать это следующими командами:

1. Добавить зависимость:

```sh
npm link
```

2. Привязать в репозитории тестирования:

```sh
npm link labels-tree
```

3. Импортировать `TreeStore` в репозиторий для тестирования:

```ts
import { TreeStore } from 'labels-tree'

const store = new TreeStore([])
```

### Временная оценка быстродействия TreeStore

Оценка выполнена в нотации `O-большого`, `n` - число элементов в дереве, `h` - его маскимальная высота от "корня" до "листа"

- `new TreeStore` - `O(n)`, три прохода по массиву: один для копирования (минимальная инкапсуляция), один чтобы поместить id в мапу и чтобы обозначить ссылки на детей и родителей
- `getAll` - `O(1)` при отстутствии изменений, `O(n)` после изменений дерева
- `getItem` - `O(1)`, поиск по `Map`
- `getChildren` - `O(k)`, где `k` - число детей элемента
- `getAllChildren` - `O(k)`, где `k` - размер всего поддерева
- `getAllParents` - `O(h)`
- `addItem` - `O(1)`
- `removeItem` - `O(k)`, где `k` - размер удаляемого поддерева
- `updateItem` - `O(1)` при обновлении данных и `O(h)` при смене родителя, чтобы обрубить возникновение цикла
